<%@page import="kr.or.ddit.cart.vo.CartVO"%>
<%@page import="java.util.List"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>


<%
	List<CartVO> cartList = (List<CartVO>)request.getAttribute("cartList");
%>

<!DOCTYPE html>
<html lang="kr">
<head>
	<meta charset="UTF-8">
    <title>장바구니</title>
	<link rel="stylesheet" href='<%=request.getContextPath() %>/HW_prod/css/shoppingcart-web-new.css' type="text/css">
	<script src="<%=request.getContextPath() %>/HW_prod/js/jquery-3.6.0.js"></script>

	<script type="text/javascript">
	
		$(document).ready(function() {
			alert("실행")
// 			// 전체선택, 전체해제             <---------------실행 안되요
// 			$("#chkAll").click(function() {
// 				var isChecked = $(this).prop("checked");
// 				if(isChecked){
// 					$("input[name=chkchk]").prop("checked",true);
// 				}else {$("input[name=chkchk]").prop("checked",false)}
// 			});
			
// 			// 하나 체크 해제시 전체해제, 올체크시 전체체크
// 			$("input[name=chkchk]").click(function() {
// 				var a = $(":checkbox:checked").not("#chkAll").length;
// 				var b = $("input[name=chkchk]").length;
				
// 				if(a == b){
// 					$("#chkAll").prop("checked",true);
// 				}else if(a != b){
// 					$("#chkAll").prop("checked",false);
// 				}
// 			});

// 		});
		
	</script>
</head>

<body> 
<div id="wrap">
    <header>
    	여기는 머리입니다.
	</header>
  
    <section id="contents-cart" class="contents-cart async-content" style="visibility: visible;">
       
    
   <table class="cartTable">
            <colgroup><col width="50"><col width="70"><col width="*"><col width="90"><col width="90"></colgroup>
            <thead>
            <tr class="head">
                <th scope="col" class="all-select-event"><label><input type="checkbox" id="chkAll" class="c"><span>&nbsp;&nbsp;전체선택</span></label></th>
                <th scope="colgroup" id="th-product-box" colspan="2">상품정보</th>
                <th scope="col" id="th-unit-total-price">상품수량</th>
                <th scope="col" id="th-delivery-fee">상품 가격</th>
            </tr>
            </thead>
            
    <tbody id="cartTable-sku">
           
           
           
           <%
           	int cartSize = cartList.size();
           	int allProdPrice = 0;
           if(cartSize > 0){
        	   for(int i = 0 ; i <cartSize; i++){
        		   if(cartList.get(i).getCartOrder() == 1){
        		%>   
        		   
        		 <tr class="cart-deal-item " data-item-status="CHECKED" data-adult="false" data-bundle-id="4794036806" data-bundle-type="PRODUCT" data-app="" data-group-type="rocket">
                
	                <td class="cart-deal-item__image ">
                            <a href="#" class="moveProduct">
                                <img src="<%=request.getContextPath() %><%=cartList.get(i).getProdImgPath() %>" width="78" height="78" class="product-img img" alt="제품 사진">
                            </a>
                    </td>
                    <td class="product-box">
                        <div class="product-name-part">
                            <a href="#" class="product-name moveProduct modify-color"><%=cartList.get(i).getProdName() %></a><br>
                        </div>
                    </td>
                    <td class="unit-total-price">
						<div class="unit-total-sale-price"><%=cartList.get(i).getCartQty() %></div>
                    </td>
	                <td class="delivery-fee" rowspan="1" headers="th-delivery-fee">
                        <span class="delivery-fee__free"><%=cartList.get(i).getProdPrice() %></span>
                    </td>
            </tr>  
        		   
        	<%	
        			allProdPrice += cartList.get(i).getProdPrice();
        		   }
        	   }
           }
           
           %>
        
        <tr class="bundle-price-total">
            <td colspan="5"></td>
        </tr>
    
    </tbody>
            
</table>
        

            <br>
            <%-- <div class="cart-total-price" data-total-price="24900" data-discount-price="0">
                <div class="cart-total-price__inner">
                    <div class="price-area">
                        <h2 class="sr-only" id="cart-total-price">
                      	      장바구니 총 주문금액 정보
                        </h2>

                        총 상품가격
                        <em class="final-product-price">
                            	<%=allProdPrice %>
                        </em>원
                        <span class="final-sale-area">
                        
                        </span>

                        <span class="symbol-plus1"><span class="sr-only">더하기</span></span>
                        총 배송비
                        <em class="final-delivery-charge">0</em>원

                        <span class="symbol-equal1"><span class="sr-only">결과는</span></span>
                        총 주문금액
                        <em class="final-order-price" data-final-order-price="24900">
                            여기는 총 금액<span>원</span>
                        </em>
                    </div>
                </div>
            </div> --%>

            
            <div class="order-buttons">
                <a href="<%=request.getContextPath() %>/HW/prod/list.do" class="goShopping logging" >쇼핑하기</a>
            </div>
        
		</section>
	</div>
</body>
</html>